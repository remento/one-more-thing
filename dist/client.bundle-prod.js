!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){((e,t,r)=>{"use strict";const n=r.log||r,o=r.debug||r,s=t.console.warn;n("baton: client.js");const i=t.baton||{},a={},l={selector:'a.site-nav__link[href*="pages/compare"]',recoveryUrl:"/pages/one-more-thing",recoveryContentId:"one-more-thing",pmOpenedKey:"BATON_RECOVERED",storageKey:"BATON_RECOVERED"};for(let e in l)a[e]=i[e]||l[e];new class{constructor(e){this.pollFreqMS=5e3,this.recoveryDelayMS=100,this.safeOrigin=t.location.origin,this.pmOpenedKey=e.pmOpenedKey,this.selector=e.selector,this.storageKey=e.storageKey,this.recoveryUrl=e.recoveryUrl,this.recoveryContentId=e.recoveryContentId,this.recoveryExists=!1,this.opener=t.opener,this.listenMessages(),this.isRecoveryPage?this.markSession():(this.listenInteraction(),this.loadSession(),this.pollOpener())}loadSession(){try{this.recoveryExists=t.sessionStorage.getItem(this.storageKey)}catch(e){n("baton: cannot read sessionStorage",e)}}pollOpener(){n("baton:pollOpener",{recoveryExists:this.recoveryExists,opener:this.opener,pollOpener_intervalID:this.pollOpener_intervalID}),this.recoveryExists||!this.opener||this.pollOpener_intervalID||(this.pollOpener_intervalID=setInterval(()=>{o("baton: send msg()",this.opener,this.safeOrigin),this.opener.postMessage({inquiry:this.pmOpenedKey},this.safeOrigin)},this.pollFreqMS))}cancelPollOpener(){clearInterval(this.pollOpener_intervalID),delete this.pollOpener_intervalID}receiveMessage(e){e.origin===this.safeOrigin&&(n("baton: receiveMessage:",e),this.isRecoveryPage?e.data.inquiry===this.pmOpenedKey&&e.source.postMessage({response:this.pmOpenedKey,payload:!0},this.safeOrigin):e.data.response===this.pmOpenedKey&&!0===e.data.payload&&(this.markSession(),this.cancelPollOpener()))}listenMessages(){t.addEventListener("message",this.receiveMessage.bind(this),!1)}listenInteraction(){e.body.addEventListener("click",e=>{let t=e.target;if(!this.recoveryExists){let r;e.path.some(e=>{r=e;let n=!!e.parentElement&&e.parentElement.querySelector(this.selector),o=t;do{if(n===o)return!0;o=o.parentElement}while(o&&e.parentElement!==o);return!1})&&(n("baton: key action triggered",{selector:this.selector,event:e}),r.target="_blank",e.preventDefault=function(){s('baton: preventDefault bypassed to preserve link window targeting (target="_blank")')},setTimeout(this.loadRecoveryPage.bind(this),this.recoveryDelayMS))}},{capture:!0,once:!1,passive:!1})}loadRecoveryPage(){n("baton: loading recovery page",this.recoveryUrl),this.markSession(),t.location.href=this.recoveryUrl}markSession(){this.recoveryExists=!0;try{t.sessionStorage.setItem(this.storageKey,!0)}catch(e){n("baton: sessionStorage not available",e)}}get isRecoveryPage(){return!!this.recoveryContentEl||t.location.pathname===this.recoveryUrl}get recoveryContentEl(){return!!e.getElementById(this.recoveryContentId)}}(a)})(document,window,"localhost"===location.hostname?window.console:function(){})}]);